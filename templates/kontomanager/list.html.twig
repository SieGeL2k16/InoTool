{% extends 'InoKontoManager.html.twig' %}
{% block body %}
<div class="row">
  <div class="col-12">
    <div class="card-title h3">Kontoübersicht</div>
  </div>
</div>
<form method="post" action="{{ path('km_list') }}" id="frm_acc_list_filter" class="row gx-1">
  <div class="col-auto">
    <select name="f_cat" id="f_cat" class="form-select ino-select2" data-minimum-results-for-search="Infinity">
      <option value="-1">Alle Kategorien</option>
      {% for cid,cn in CATEGORYLIST %}
       <option value="{{ cn['id'] }}"{% if F_CATEGORY == cn['id'] %} selected{% endif %}>{{ cn['name'] }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-auto">
    <select name="f_month" id="f_month" class="form-select ino-select2" data-minimum-results-for-search="Infinity">
      <option value="-1">Alle Monate</option>
      {% for mid,mon in MONTHLIST %}
      <option value="{{ mid }}"{% if F_MONTH == mid %} selected{% endif %}>{{ mon }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-auto">
    <select name="f_year" id="f_year" class="form-select ino-select2" data-minimum-results-for-search="Infinity">
      <option value="-1">Alle Jahre</option>
      {% for y in YEARLIST %}
        <option value="{{ y }}"{% if F_YEAR == y %} selected{% endif %}>{{ y }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-auto">
    <input type="text" name="f_srch" id="f_srch" class="form-control" value="" placeholder="Suchen nach...">
  </div>
  <div class="col-auto">
    <button type="submit" name="btn_filter" id="btn_filter" class="btn btn-outline-secondary"><i class="fa fa-filter"></i></button>
  </div>
</form>
<div class="row mt-3">
  <div class="col-xxl-8 col-xl-10 col-12">
    <p>Zeige {{ DATA_COUNT|format_number(locale='de') }} von {{ TOTAL_COUNT|format_number(locale='de') }} Einträge(n) | Einnahmen: <span class="{{ REVENUE['INCOME']|MoneyColor }}">{{ REVENUE['INCOME']|format_currency('EUR',locale='de')}}</span> | Ausgaben: <span class="{{ REVENUE['OUTCOME']|MoneyColor }}">{{ REVENUE['OUTCOME']|format_currency('EUR',locale='de') }}</span> | Diff.: <span class="{{ REVENUE['DIFF']|MoneyColor }}">{{ REVENUE['DIFF']|format_currency('EUR',locale='de') }}</span></p>
    <div class="table-responsive">
      <table class="table table-striped table-hover" id="tbl_account_data">
      <thead>
      <tr>
        <th>&nbsp;</th>
        <th>Datum</th>
        <th>Kategorie</th>
        <th>Buchungstext</th>
        <th class="text-end">Summe</th>
        <th class="text-end">Bank</th>
      </tr>
      </thead>
      <tbody>
      {% for d in DATA %}
      <tr>
        <td><div><input class="form-check-input" type="checkbox" id="chk_{{ d['id'] }}" value="{{ d['id'] }}" aria-label="Eintrag löschen"></div></td>
        <td>{{ d['dt'] }}</td>
        <td>{{ d['category_name'] }}</td>
        <td>{{ d['description'] }}</td>
        <td class="text-end {{ d['amount']|MoneyColor }}">{{ d['amount']|format_currency('EUR',locale='de') }}</td>
        <td class="text-end">{{ d['bank_shortcut'] }}</td>
      </tr>
      {% else %}
      <tr>
        <td colspan="5" class="text-center fst-italic fw-bold">Keine Daten gefunden!</td>
      </tr>
      {% endfor %}
      </tbody>
      </table>
      <p>Zeige {{ DATA_COUNT|format_number(locale='de') }} von {{ TOTAL_COUNT|format_number(locale='de') }} Einträge(n) | Einnahmen: <span class="{{ REVENUE['INCOME']|MoneyColor }}">{{ REVENUE['INCOME']|format_currency('EUR',locale='de')}}</span> | Ausgaben: <span class="{{ REVENUE['OUTCOME']|MoneyColor }}">{{ REVENUE['OUTCOME']|format_currency('EUR',locale='de') }}</span> | Diff.: <span class="{{ REVENUE['DIFF']|MoneyColor }}">{{ REVENUE['DIFF']|format_currency('EUR',locale='de') }}</span></p>
    </div>
  </div>
</div>
{% endblock %}
{% block javascripts %}
<script>
$(document).ready(function()
  {
  $('.ino-select2').select2({});
});
</script>
{% endblock %}
